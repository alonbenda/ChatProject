{"ast":null,"code":"// Copyright (c) .NET Foundation. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\nimport { LogLevel } from \"./ILogger\";\n\nvar XhrHttpClient =\n/** @class */\nfunction (_super) {\n  __extends(XhrHttpClient, _super);\n\n  function XhrHttpClient(logger) {\n    var _this = _super.call(this) || this;\n\n    _this.logger = logger;\n    return _this;\n  }\n  /** @inheritDoc */\n\n\n  XhrHttpClient.prototype.send = function (request) {\n    var _this = this; // Check that abort was not signaled before calling send\n\n\n    if (request.abortSignal && request.abortSignal.aborted) {\n      return Promise.reject(new AbortError());\n    }\n\n    if (!request.method) {\n      return Promise.reject(new Error(\"No method defined.\"));\n    }\n\n    if (!request.url) {\n      return Promise.reject(new Error(\"No url defined.\"));\n    }\n\n    return new Promise(function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      xhr.open(request.method, request.url, true);\n      xhr.withCredentials = true;\n      xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\"); // Explicitly setting the Content-Type header for React Native on Android platform.\n\n      xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n      var headers = request.headers;\n\n      if (headers) {\n        Object.keys(headers).forEach(function (header) {\n          xhr.setRequestHeader(header, headers[header]);\n        });\n      }\n\n      if (request.responseType) {\n        xhr.responseType = request.responseType;\n      }\n\n      if (request.abortSignal) {\n        request.abortSignal.onabort = function () {\n          xhr.abort();\n          reject(new AbortError());\n        };\n      }\n\n      if (request.timeout) {\n        xhr.timeout = request.timeout;\n      }\n\n      xhr.onload = function () {\n        if (request.abortSignal) {\n          request.abortSignal.onabort = null;\n        }\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve(new HttpResponse(xhr.status, xhr.statusText, xhr.response || xhr.responseText));\n        } else {\n          reject(new HttpError(xhr.statusText, xhr.status));\n        }\n      };\n\n      xhr.onerror = function () {\n        _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + xhr.status + \": \" + xhr.statusText + \".\");\n\n        reject(new HttpError(xhr.statusText, xhr.status));\n      };\n\n      xhr.ontimeout = function () {\n        _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\n\n        reject(new TimeoutError());\n      };\n\n      xhr.send(request.content || \"\");\n    });\n  };\n\n  return XhrHttpClient;\n}(HttpClient);\n\nexport { XhrHttpClient };","map":{"version":3,"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","AbortError","HttpError","TimeoutError","HttpClient","HttpResponse","LogLevel","XhrHttpClient","_super","logger","_this","call","send","request","abortSignal","aborted","Promise","reject","method","Error","url","resolve","xhr","XMLHttpRequest","open","withCredentials","setRequestHeader","headers","keys","forEach","header","responseType","onabort","abort","timeout","onload","status","statusText","response","responseText","onerror","log","Warning","ontimeout","content"],"sources":["C:/Users/ALON/Projects/SOAProject/TalkBackProject/myapp/node_modules/@aspnet/signalr/dist/esm/XhrHttpClient.js"],"sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nvar XhrHttpClient = /** @class */ (function (_super) {\r\n    __extends(XhrHttpClient, _super);\r\n    function XhrHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        _this.logger = logger;\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    XhrHttpClient.prototype.send = function (request) {\r\n        var _this = this;\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(request.method, request.url, true);\r\n            xhr.withCredentials = true;\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            // Explicitly setting the Content-Type header for React Native on Android platform.\r\n            xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n            var headers = request.headers;\r\n            if (headers) {\r\n                Object.keys(headers)\r\n                    .forEach(function (header) {\r\n                    xhr.setRequestHeader(header, headers[header]);\r\n                });\r\n            }\r\n            if (request.responseType) {\r\n                xhr.responseType = request.responseType;\r\n            }\r\n            if (request.abortSignal) {\r\n                request.abortSignal.onabort = function () {\r\n                    xhr.abort();\r\n                    reject(new AbortError());\r\n                };\r\n            }\r\n            if (request.timeout) {\r\n                xhr.timeout = request.timeout;\r\n            }\r\n            xhr.onload = function () {\r\n                if (request.abortSignal) {\r\n                    request.abortSignal.onabort = null;\r\n                }\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    resolve(new HttpResponse(xhr.status, xhr.statusText, xhr.response || xhr.responseText));\r\n                }\r\n                else {\r\n                    reject(new HttpError(xhr.statusText, xhr.status));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + xhr.status + \": \" + xhr.statusText + \".\");\r\n                reject(new HttpError(xhr.statusText, xhr.status));\r\n            };\r\n            xhr.ontimeout = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                reject(new TimeoutError());\r\n            };\r\n            xhr.send(request.content || \"\");\r\n        });\r\n    };\r\n    return XhrHttpClient;\r\n}(HttpClient));\r\nexport { XhrHttpClient };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}