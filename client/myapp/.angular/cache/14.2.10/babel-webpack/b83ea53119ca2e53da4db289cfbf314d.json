{"ast":null,"code":"// Copyright (c) .NET Foundation. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n\n  return t;\n};\n\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\nimport { LogLevel } from \"./ILogger\";\nimport { isArrayBuffer } from \"./Utils\";\nvar requestModule;\n\nif (typeof XMLHttpRequest === \"undefined\") {\n  // In order to ignore the dynamic require in webpack builds we need to do this magic\n  // @ts-ignore: TS doesn't know about these names\n  var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\n  requestModule = requireFunc(\"request\");\n}\n\nvar NodeHttpClient =\n/** @class */\nfunction (_super) {\n  __extends(NodeHttpClient, _super);\n\n  function NodeHttpClient(logger) {\n    var _this = _super.call(this) || this;\n\n    if (typeof requestModule === \"undefined\") {\n      throw new Error(\"The 'request' module could not be loaded.\");\n    }\n\n    _this.logger = logger;\n    _this.cookieJar = requestModule.jar();\n    _this.request = requestModule.defaults({\n      jar: _this.cookieJar\n    });\n    return _this;\n  }\n\n  NodeHttpClient.prototype.send = function (httpRequest) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      var requestBody;\n\n      if (isArrayBuffer(httpRequest.content)) {\n        requestBody = Buffer.from(httpRequest.content);\n      } else {\n        requestBody = httpRequest.content || \"\";\n      }\n\n      var currentRequest = _this.request(httpRequest.url, {\n        body: requestBody,\n        // If binary is expected 'null' should be used, otherwise for text 'utf8'\n        encoding: httpRequest.responseType === \"arraybuffer\" ? null : \"utf8\",\n        headers: __assign({\n          // Tell auth middleware to 401 instead of redirecting\n          \"X-Requested-With\": \"XMLHttpRequest\"\n        }, httpRequest.headers),\n        method: httpRequest.method,\n        timeout: httpRequest.timeout\n      }, function (error, response, body) {\n        if (httpRequest.abortSignal) {\n          httpRequest.abortSignal.onabort = null;\n        }\n\n        if (error) {\n          if (error.code === \"ETIMEDOUT\") {\n            _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\n\n            reject(new TimeoutError());\n          }\n\n          _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + error);\n\n          reject(error);\n          return;\n        }\n\n        if (response.statusCode >= 200 && response.statusCode < 300) {\n          resolve(new HttpResponse(response.statusCode, response.statusMessage || \"\", body));\n        } else {\n          reject(new HttpError(response.statusMessage || \"\", response.statusCode || 0));\n        }\n      });\n\n      if (httpRequest.abortSignal) {\n        httpRequest.abortSignal.onabort = function () {\n          currentRequest.abort();\n          reject(new AbortError());\n        };\n      }\n    });\n  };\n\n  NodeHttpClient.prototype.getCookieString = function (url) {\n    return this.cookieJar.getCookieString(url);\n  };\n\n  return NodeHttpClient;\n}(HttpClient);\n\nexport { NodeHttpClient };","map":{"version":3,"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","AbortError","HttpError","TimeoutError","HttpClient","HttpResponse","LogLevel","isArrayBuffer","requestModule","XMLHttpRequest","requireFunc","__webpack_require__","__non_webpack_require__","require","NodeHttpClient","_super","logger","_this","Error","cookieJar","jar","request","defaults","send","httpRequest","Promise","resolve","reject","requestBody","content","Buffer","from","currentRequest","url","body","encoding","responseType","headers","method","timeout","error","response","abortSignal","onabort","code","log","Warning","statusCode","statusMessage","abort","getCookieString"],"sources":["C:/Users/ALON/Projects/SOAProject/TalkBackProject/myapp/node_modules/@aspnet/signalr/dist/esm/NodeHttpClient.js"],"sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\nvar requestModule;\r\nif (typeof XMLHttpRequest === \"undefined\") {\r\n    // In order to ignore the dynamic require in webpack builds we need to do this magic\r\n    // @ts-ignore: TS doesn't know about these names\r\n    var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\r\n    requestModule = requireFunc(\"request\");\r\n}\r\nvar NodeHttpClient = /** @class */ (function (_super) {\r\n    __extends(NodeHttpClient, _super);\r\n    function NodeHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        if (typeof requestModule === \"undefined\") {\r\n            throw new Error(\"The 'request' module could not be loaded.\");\r\n        }\r\n        _this.logger = logger;\r\n        _this.cookieJar = requestModule.jar();\r\n        _this.request = requestModule.defaults({ jar: _this.cookieJar });\r\n        return _this;\r\n    }\r\n    NodeHttpClient.prototype.send = function (httpRequest) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            var requestBody;\r\n            if (isArrayBuffer(httpRequest.content)) {\r\n                requestBody = Buffer.from(httpRequest.content);\r\n            }\r\n            else {\r\n                requestBody = httpRequest.content || \"\";\r\n            }\r\n            var currentRequest = _this.request(httpRequest.url, {\r\n                body: requestBody,\r\n                // If binary is expected 'null' should be used, otherwise for text 'utf8'\r\n                encoding: httpRequest.responseType === \"arraybuffer\" ? null : \"utf8\",\r\n                headers: __assign({ \r\n                    // Tell auth middleware to 401 instead of redirecting\r\n                    \"X-Requested-With\": \"XMLHttpRequest\" }, httpRequest.headers),\r\n                method: httpRequest.method,\r\n                timeout: httpRequest.timeout,\r\n            }, function (error, response, body) {\r\n                if (httpRequest.abortSignal) {\r\n                    httpRequest.abortSignal.onabort = null;\r\n                }\r\n                if (error) {\r\n                    if (error.code === \"ETIMEDOUT\") {\r\n                        _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                        reject(new TimeoutError());\r\n                    }\r\n                    _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + error);\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                if (response.statusCode >= 200 && response.statusCode < 300) {\r\n                    resolve(new HttpResponse(response.statusCode, response.statusMessage || \"\", body));\r\n                }\r\n                else {\r\n                    reject(new HttpError(response.statusMessage || \"\", response.statusCode || 0));\r\n                }\r\n            });\r\n            if (httpRequest.abortSignal) {\r\n                httpRequest.abortSignal.onabort = function () {\r\n                    currentRequest.abort();\r\n                    reject(new AbortError());\r\n                };\r\n            }\r\n        });\r\n    };\r\n    NodeHttpClient.prototype.getCookieString = function (url) {\r\n        return this.cookieJar.getCookieString(url);\r\n    };\r\n    return NodeHttpClient;\r\n}(HttpClient));\r\nexport { NodeHttpClient };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}